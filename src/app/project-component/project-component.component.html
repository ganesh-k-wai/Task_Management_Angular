<div class="container-fluid p-0">
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow fixed-top" style="height: 55px;">
        <div class="container-fluid p-0">
            <a class="navbar-brand " routerLink="/project-comp">
                <img src="tasklogo.png" alt="Logo" width="55" height="55" class="d-inline-block align-text-top img-fluid ps-2">
                <span class="p-1 mt-2"></span>
            </a>
            <div class="d-flex">
                <p class="my-2">Welcome {{ userName }},</p>
                <a>
                    <button class="btn btn-outline-secondary ms-2 border-0" (click)="logout()">
                        <i class="bi bi-power"></i> Logout
                    </button>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-5 p-5">
        <div class="row">
            <div class="col-md-12 mb-4">
                <div class="card shadow">
                    <div class="card-header">
                        <h4 class="card-title">Create Project</h4>
                    </div>
                    <div class="card-body">
                        <form (ngSubmit)="onSubmit()">
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <label class="form-label">Project Title</label>
                                    <input required type="text" class="form-control" [(ngModel)]="project.title"
                                        name="title" required />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-control" rows="1" [(ngModel)]="project.description"
                                        name="description" required></textarea>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Created By</label>
                                    <input type="text" class="form-control" [value]="userName" name="createdBy" required
                                        readonly />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Project Manager</label>
                                    <input required type="text" class="form-control"
                                        [(ngModel)]="project.projectManager" name="projectManager" required />
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <label class="form-label">Start Date</label>
                                    <input required type="date" class="form-control" [(ngModel)]="project.startDate"
                                        name="startDate" required id="startDate" />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">End Date</label>
                                    <input required type="date" class="form-control" [(ngModel)]="project.endDate"
                                        name="endDate" required id="endDate" />
                                </div>

                                <div class="col-md-3">
                                    <label class="form-label">Team Members</label>
                                    <div class="input-group">
                                        <div class="dropdown w-100 ">
                                            <button class="btn dropdown-toggle border border-grey w-100 text-start"
                                                type="button" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                                aria-expanded="false">
                                                Select Team Members
                                            </button>
                                            <ul class="dropdown-menu w-100" aria-labelledby="dropdownMenuButton"
                                                style="padding: 10px; max-height: 200px; overflow-y: auto;">
                                                <li class="d-flex align-items-center"
                                                    *ngFor="let member of apiService.teamMembers">
                                                    <input type="checkbox" [id]="member" [value]="member"
                                                        (change)="onCheckboxChange($event)"
                                                        [checked]="project.teamMembers.includes(member)" class="me-2">
                                                    <label [for]="member">{{ member }}</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-3">
                                    <label class="form-label">Due In (Days)</label>
                                    <input required type="number" class="form-control" [(ngModel)]="project.dueDate"
                                        name="dueDate" required id="dueDate" readonly />
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <label class="form-label">Priority</label>
                                    <select class="form-select" [(ngModel)]="project.status" name="status" required>
                                        <option value="High" selected>High</option>
                                        <option value="Medium">Medium</option>
                                        <option value="Low">Low</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Assigned To</label>
                                    <input required type="text" class="form-control" [(ngModel)]="project.assignedTo"
                                        name="assignedTo" required />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Estimate (hours)</label>
                                    <input required type="number" class="form-control" [(ngModel)]="project.estimate"
                                        name="estimate"  required />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Time Spent (hours)</label>
                                    <input required type="number" class="form-control" [(ngModel)]="project.timeSpent"
                                        name="timeSpent"  required />
                                </div>
                            </div>
                            <button type="submit" class="btn btn-outline-secondary border border-grey">Create Project</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                
                <div class="d-flex justify-content-between align-items-center">
                    <!-- Search Box -->
                    <div class="pb-1 d-flex align-items-center">
                        <div class="input-group w-100">
                            <input type="search" class="form-control projectsearchBox border-end-0" placeholder="Search..." aria-label="Search" [(ngModel)]="searchQuery" (input)="onSearchChange()">
                            <button class="btn border border-grey border-start-0"  type="button">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Sort Button -->
                    <div class="pb-1">
                        <button class="btn border border-grey" type="button" (click)="onSortChange('title')">
                            <i class="bi bi-funnel"></i>
                        </button>
                    </div>
                </div>
                <!-- <div class="d-flex justify-content-between align-items-center">
                    <div class="pb-1 d-flex align-items-center">
                        <div class="input-group w-100">
                            <input type="search" class="form-control projectsearchBox" placeholder="Search..." aria-label="Search">
                            <button class="btn border border-grey" type="button">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>

                    <div class="pb-1">
                        <button class="btn border border-grey" type="button">
                            <i class="bi bi-funnel"></i>
                        </button>
                    </div>
                </div> -->

                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="thead-light">
                            <tr class="">
                                <!-- <th>Sr.No</th> -->
                                <th>Title</th>
                                <th>Created By</th>
                                <th>Project Manager</th>
                                <th>Start Date</th>
                                <!-- <th>End Date</th> -->
                                <th>Due In (Days)</th>
                                <th>Team Members</th>
                                <th>Priority</th>
                                <!-- <th>Assigned To</th> -->
                                <!-- <th>Estimate</th> -->
                                <!-- <th>Time Spent</th> -->
                                <th class="text-center">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let project of filteredProjects | paginate: { itemsPerPage: itemsPerPage, currentPage: page }">

                            <!-- <tr *ngFor="let project of projects; let i=index"> -->
                                <!-- <td>{{ i+1}}</td> -->
                                <td [title]="project.title">{{ project.title }}</td>
                                <td>{{ project.createdBy }}</td>
                                <td>{{ project.projectManager }}</td>
                                <td>{{ project.startDate | date:'dd-MM-yyyy' }}</td>
                                <!-- <td>{{ project.endDate | date:'dd-MM-yyyy' }}</td> -->
                                <td>{{ project.dueDate + " Days" }}</td>
                                <td>{{ project.teamMembers.length }}</td>
                                <td>{{ project.status }}</td>
                                <!-- <td>{{ project.assignedTo }}</td> -->
                                <!-- <td>{{ project.estimate }}</td> -->
                                <!-- <td>{{ project.timeSpent }}</td> -->
                                <td title="View" class="text-center align-items-center " (click)="navigateToTaskComponent(project)" style="cursor: pointer;"><i
                                        class="bi bi-eye"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- <div class="d-flex justify-content-between align-items-center pb-1">
                    <div class="d-flex align-items-center">
                        <select id="itemsPerPage" class="form-select fs-6 " style="min-width: 20px;">
                            <option value="5">5</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                        </select>
                    </div>



                    <div class="d-flex align-items-center justify-content-between">
                        <span class="text-muted">Page 1 of 1</span>

                        <span class="text-muted">(1 item)</span>

                        <div class="d-flex align-items-center">
                            <button class="btn  btn-sm px-2" type="button"><i class="bi bi-chevron-left"></i></button>
                            <button class="btn  btn-sm px-2" type="button">1</button>
                            <span class="mx-2">of 2</span>
                            <button class="btn  btn-sm px-2" type="button"><i class="bi bi-chevron-right"></i></button>
                        </div>
                    </div>
                </div> -->
            
                <div class="d-flex justify-content-between align-items-center pb-1">
                    <!-- Items Per Page Dropdown -->
                    <div class="d-flex align-items-center">
                        <!-- <label for="itemsPerPage" class="me-2 fs-6">Show</label> -->
                        <select id="itemsPerPage" class="form-select fs-6" [(ngModel)]="itemsPerPage" (change)="onPageChange(1)">
                            <option value="5">5</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                        </select>
                    </div>

                    <!-- Pagination Controls -->
                    <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <!-- <footer class="footer py-2" style="background-color: whitesmoke;">
        <div class="container text-center">
            <span class="text-muted">Task Management System</span>
        </div>
    </footer> -->
</div>